Juan Pablo Pino - A01205525

-- EJERCICIO 1

Codigo crear.sql

-- EJERCICIO 2

-- Revisa el contenido de la tabla materiales y determina si existe alguna inconsistencia en el contenido de la tabla. ¿Cuál es? ¿A qué se debe?
--    La inconsistencia es el registro que acabo de insertar. No debería poder ingresarlo puesto que tiene la misma llave primaria que otro registro.

-- A continuación definiremos a la Clave como llave primaria de la tabla de materiales, esto mediante la creación de un constraint.
-- Agrega nuevamente el registro a la tabla de materiales
-- ¿Qué ocurrió?
--    No me permite ingresarlo puesto que ambos registros tienen la misma llave primaria

-- Verifica si la tabla de materiales tiene definido algún constraint (restricción)
--    Si existe.

-- ¿Qué información muestra esta consulta?
--    Muestra el tipo de constraint (PRIMARY KEY), el nombre y otros parametros

-- Asegúrate de crear constraints análogos para definir las llaves primarias de las tablas proveedores, y proyectos.
-- ¿Qué sentencias utilizaste para definir las llaves primarias?
ALTER TABLE Proveedores ADD CONSTRAINT llaveProveedores PRIMARY KEY (RFC)
ALTER TABLE Proyectos ADD CONSTRAINT llaveProyectos PRIMARY KEY (Numero)

-- Define el constraint correspondiente a la llave primaria para la tabla entregan, considerando que en este caso, la llave primaria está integrada por varias columnas.
-- ¿Qué sentencias utilizaste para definir este constrait?
ALTER TABLE Entregan ADD CONSTRAINT llaveEntregan PRIMARY KEY (Clave, RFC, Numero, Fecha)


-- EJERCICIO 3

-- Revisa y analiza el contenido de las tablas materiales, proveedores y proyectos, utilizando la sentencia.
-- ¿Qué particularidad observas en los valores para clave, rfc y numero?
--    Los datos ingresados para las llaves no existen en otras tablas.
-- ¿Cómo responde el sistema a la inserción de este registro?
--    Si permite insertar los datos.


-- Intenta nuevamente la inserción del registro inconsistente.
-- ¿Qué significa el mensaje que emite el sistema?
--    Significa que no se puede insertar el valor porque hay un conflicto con la tabla de Materiales (no existe)
-- ¿Qué significado tiene la sentencia anterior?
--    Significa que la base de datos no nos va a dejar ingresar valores que no existan en otras tablas, aumentando su integridad referencial

-- Para asegurar que no se presenten inconsistencias con relación a las otras llaves foráneas, agrega los constraints correspondientes a rfc y número.
ALTER TABLE Entregan ADD CONSTRAINT cfentreganrfc FOREIGN KEY (RFC) REFERENCES Proveedores(RFC)
ALTER TABLE Entregan ADD CONSTRAINT cfentregannumero FOREIGN KEY (Numero) REFERENCES Proyectos(Numero)

-- Revisa los constraints de cada tabla. Para visualizar los constraints que hemos creado, se utiliza la siguiente sentencia:
sp_helpconstraint Entregan
-- ¿Qué significan las columnas de esas consultas?
--    El tipo de contraint (Foraneo/Primario), el nombre asignado por nosotros, y las llaves involucradas en el constraint, 
--    entre otros parametros.



-- EJERCICO 4

-- ¿Qué uso se le está dando a GETDATE()?
--    Inserta en la tabla la fecha y hora (timestamp) del momento en que fue procesada la sentencia.

-- ¿Tiene sentido el valor del campo de cantidad?
--    No, porque no se puede entregar la cantidad de 0.

-- Intenta insertar un registro con cantidad igual o menor que 0.
-- ¿Cómo responde el sistema?
--    Dice que hay un conflico con el constraint CHECK de cantidad.
-- ¿Qué significa el mensaje?
--    Esto significa que la ya no se pueden insertar valores menores o iguales a cero en cantidad.


-- Como parte del reporte, explica el concepto de integridad referencial
--    La integridad referencial es el conjunto de reglas definidas en una base de datos relacional
--    para asegurarse de que los registros que se inserten sean validos[1]. Esta relacionado a las llaves foraneas,
--    determinando que los valores que esta tome deben ser nulos o que existan en la llave a la que referencia[2].
--    El DBMS realiza comprobaciones con cada insercion/edicion/eliminacion de la base de datos para asegurarse de
--    que las reglas definidas se cumplan.


--  [1]  http://www.aulaclic.es/sql/b_8_1_1.htm
--  [2]  http://www.dataprix.com/43-regla-integridad-referencial

